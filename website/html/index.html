<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Stereoscopic Image Analyzer</title>
		<link rel = "stylesheet" type = "text/css" href = "css/index.css" />
		<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
	</head>
	<body>
		<header>
			<h2>Stereoscopic Image Analyzer</h2>
		</header>
		<div class="container">
		<div class="canvases">
			<h3>Choose the matching left and right stereograms:</h3>
			<input type="file" id="imageLeft" name="imageLeft" accept=".jpg,.png"/>
			<input type="file" id="imageRight" name="imageRight" accept=".jpg,.png"/>
		</div>
		<div>
			<canvas id="imageLeftCanvas" width="0" height="0"></canvas>
			<canvas id="imageRightCanvas" width="0" height="0"></canvas>
		</div>
		<div>
			<span>
				Focal Length:
				<input type="number" id="focalLength" name="focalLength" min="0" max="300" step="1" value="0"/>
				mm
				<input type="button" id="focalLengthPredict" name="focalLengthPredict" value="Predict Focal Length"/>
				<img src="images/loading.gif" width="25" id="loading_fl" hidden/>
			</span>
		</div>
		<div>
			<span>
				Sensor Width:
				<input type="number" id="sensorWidth" name="sensorWidth" min="0" max="300" step="1" value="0"/>
				mm
				<input type="button" id="getPoints" name="getPoints" value="Get Valid Points"/>
				<img src="images/loading.gif" width="25" id="loading_vp" hidden/>
			</span>
		</div>
		<div>
			<span>
				<input type="checkbox" id="selectMode"/>
				Point selection mode:
				<span id="selectModeIndicator">Reference</span>
			</span>
		</div>
		<div>
			<span>
				Reference Measurement Length:
				<input type="number" id="referenceLength" name="referenceLength" min="0" max="300" step="1" value="0"/>
				mm
			</span>
		</div>
		<div>
			<span>
				<input type="button" id="distanceEstimate" name="distanceEstimate" value="Estimate Distance"/>
				<img src="images/loading.gif" width="25" id="loading_ed" hidden/>
				Estimated distance between points: <span id="output"></span>
			</span>
		</div>
		<span id="error_message"></span>
	</div>
		<script src="js/display.js"></script>
		<script src="js/focal_predictor.js"></script>
		<script src="js/distance_estimator.js"></script>
	</body>
</html>